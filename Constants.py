class ASSETS:
    EnterBattleStamina = "stamina.png"
    StartBattle = "fight.png"
    StartBattlePVP = "fightpvp.png"
    NextPVP = "nextpvp.png"
    PVPNoPoints = "pvpnomore.png"
    StartBattleGray = "fightgray.png"
    AutoBattle = "auto.png"
    Cancel = "cancel.png"
    Battles = "battles.png"
    ResourceDungeon = "resourcedungeon.png"
    DungeonNotAvailable = "dungeonnotavailable.png"
    EnterEraSaga = "entersaga.png"
    EraSagaDone = "erasagadone.png"
    SagaComplete = "sagacomplete.png"
    RightArrow = "rightharrow.png"
    GemDungeon = "gemdungeon.png"
    RuneDungeon = "runedungeon.png"
    MazeCoinDungeon = "mazecoindungeon.png"
    RefillStamina = "refillstamina.png"
    PlayVideo = "playvideo.png"
    CollectAd = "collectad.png"
    QuitGame = "quitgame.png"
    EnterBattleRankUp = "enterbattlerankup.png"
    StartBattleRankUp = "startbattlerankup.png"
    PlayCutscene = "playcut.png"
    Skip = "skip.png"
    EnterMultiplayer = "entermultiplayer.png"
    EnterPVP = "enterpvp.png"
    EnterBattlePVP = "enterbattlepvp.png"
    BattleLog = "battlelog.png"
    DiscardPVP = "discardpvp.png"
    BackPVP = "backpvp.png"
    CollectPVP = "collectpvp.png"
    SeePVP = "seepvp.png"
    StartUnlocking = "startunlocking.png"
    BoxDone = "boxdone.png"
    BoxSpeedup = "boxspeedup.png"
    BoxToUnlock = "boxtounlock.png"
    RankUp1 = "rankup1.png"
    RankUp2 = "rankup2.png"
    RankUp3 = "rankup3.png"
    RankUp4 = "rankup4.png"
    RankUp5 = "rankup5.png"
    RankUp6 = "rankup6.png"
    RankUp1Synergy = "rankup1s.png"
    RankUp2Synergy = "rankup2s.png"
    RankUp3Synergy = "rankup3s.png"
    RankUp4Synergy = "rankup4s.png"
    RankUp5Synergy = "rankup5s.png"
    RankUp6Synergy = "rankup6s.png"
    RankUpSelected1 = "rankups1.png"
    RankUpSelected2 = "rankups2.png"
    RankUpSelected3 = "rankups3.png"
    RankUpSelected4 = "rankups4.png"
    RankUpSelected5 = "rankups5.png"
    RankUpSelected6 = "rankups6.png"
    ChangeTeam = "changeteam.png"
    Change = "change.png"
    Yes = "yes.png"
    ReduceTime = "reducetime.png"
    ReduceTimeGold = "reducetimegold.png"
    Wheel = "wheel.png"
    SelectTeam = "selectteam.png"
    ClaimSpin = "claimspin.png"
    SpinWheel = "spinwheel.png"
    ResumeAd = "resumead.png"
    NoAds = "noads.png"
    NotFullTeam = "notfullteam.png"
    NoMonsterLeft = "nomonsterleft.png"
    NoUndefeated = "noundefeated.png"
    Back = "back.png"
    Exit = "exit.png"
    CancelSmall = "cancelsmall.png"
    Slider = "slider.png"
    Slider2 = "slider2.png"
    Continue = "continue.png"
    EnterCavern = "entercavern.png"
    HavingFun = "havingfun.png"
    No = "no.png"
    ErrorPlayingVideo = "errorplayingvideo.png"
    FlashRaid = "flashraid.png"
    Cavern = "cavern.png"
    CavernMisery = "cavernmisery.png"
    CavernConspiracy = "cavernconspiracy.png"
    CavernFeral = "cavernferal.png"
    CavernHistoria = "cavernhistoria.png"
    CavernMultiverse = "cavernmultiverse.png"
    CavernEvaris = "cavernevaris.png"
    CavernGeneza = "caverngeneza.png"
    CavernJestin = "cavernjestin.png"
    CavernBaBa = "cavernbaba.png"
    CavernKhalorc = "cavernkhalorc.png"
    CavernTyr = "caverntyr.png"
    CavernRobur = "cavernrobur.png"
    CavernTheton = "caverntheton.png"
    CavernGriffania = "caverngriffania.png"
    CavernAlpine = "cavernalpine.png"
    CavernAbyssal = "cavernabyssal.png"
    CavernGalactic = "caverngalactic.png"
    CavernBlossom = "cavernblossom.png"
    CavernDoomed = "caverndoomed.png"
    CavernMetro = "cavernmetro.png"
    CavernCorrupted = "caverncorrupted.png"
    CavernCosmic = "caverncosmic.png"
    CavernOriginal = "cavernoriginal.png"
    ComeBackLater = "comebacklater.png"
    Selected1 = "selected1.png"
    Selected2 = "selected2.png"
    Selected3 = "selected3.png"
    ActivityHub = "acthub.png"
    ClaimDaily = "claimdaily.png"
    HatchDino = "hatchdino.png"
    HatchPanda = "hatchpanda.png"
    Mountain = "mountain.png"
    Tree = "tree.png"
    Repeat = "repeat.png"
    TakeEgg = "takeegg.png"
    PlaceVault = "placevault.png"
    Place = "place.png"
    Element = "element.png"
    ElementFire = "elementfire.png"
    ElementFireSelected = "elementfires.png"
    Rarity = "rarity.png"
    RarityUC = "rarityuc.png"
    RarityR = "rarityr.png"
    RarityUCSelected = "rarityucs.png"
    RarityRSelected = "rarityrs.png"
    Sell = "sell.png"
    Feed = "feed.png"
    MonsterUC = "monsteruc.png"
    MonsterR = "monsterr.png"
    MonsterInfo = "monsterinfo.png"
    Unlock = "unlock.png"
    MonsterEmpty = "monsterempty.png"
    Hatchery = "hatchery.png"
    HatchNotYet = "hatchnotyet.png"
    FullHatchery = "fullhatchery.png"

class Region:
    ALL = 0
    TOP = 1
    BOTTOM = 2
    LEFT = 4
    RIGHT = 8
    AD_AREA = 16

    # Combinations
    TOP_LEFT = TOP | LEFT
    TOP_RIGHT = TOP | RIGHT
    BOTTOM_LEFT = BOTTOM | LEFT
    BOTTOM_RIGHT = BOTTOM | RIGHT


# Region definitions
ASSET_REGIONS = {
    ASSETS.Cancel: Region.TOP_RIGHT,
    ASSETS.Continue: Region.BOTTOM,
    ASSETS.ActivityHub: Region.TOP,
    ASSETS.Battles: Region.BOTTOM_LEFT,
    ASSETS.RightArrow: Region.RIGHT,
    ASSETS.EnterBattleRankUp: Region.BOTTOM,
    ASSETS.StartBattleRankUp: Region.BOTTOM_RIGHT,
    ASSETS.AutoBattle: Region.TOP_LEFT,
    ASSETS.Change: Region.BOTTOM,
    ASSETS.ClaimSpin: Region.BOTTOM_RIGHT,
    ASSETS.StartBattle: Region.BOTTOM_RIGHT,
    ASSETS.Wheel: Region.TOP_RIGHT,
    ASSETS.SpinWheel: Region.BOTTOM_RIGHT,
    ASSETS.EnterCavern: Region.BOTTOM,
    ASSETS.ResourceDungeon: Region.BOTTOM,
    ASSETS.EnterBattleStamina: Region.BOTTOM,
    ASSETS.Slider: Region.BOTTOM,
    ASSETS.Slider2: Region.BOTTOM,
    ASSETS.PlayCutscene: Region.BOTTOM,
    ASSETS.EnterEraSaga: Region.BOTTOM,
    ASSETS.CavernMisery: Region.TOP_LEFT,
    ASSETS.CavernConspiracy: Region.TOP_LEFT,
    ASSETS.CavernFeral: Region.TOP_LEFT,
    ASSETS.CavernHistoria: Region.TOP_LEFT,
    ASSETS.CavernMultiverse: Region.TOP_LEFT,
    ASSETS.CavernEvaris: Region.TOP_LEFT,
    ASSETS.CavernGeneza: Region.TOP_LEFT,
    ASSETS.CavernJestin: Region.TOP_LEFT,
    ASSETS.CavernBaBa: Region.TOP_LEFT,
    ASSETS.CavernKhalorc: Region.TOP_LEFT,
    ASSETS.CavernTyr: Region.TOP_LEFT,
    ASSETS.CavernRobur: Region.TOP_LEFT,
    ASSETS.CavernTheton: Region.TOP_LEFT,
    ASSETS.CavernGriffania: Region.TOP_LEFT,
    ASSETS.CavernAlpine: Region.TOP_LEFT,
    ASSETS.CavernAbyssal: Region.TOP_LEFT,
    ASSETS.CavernGalactic: Region.TOP_LEFT,
    ASSETS.CavernBlossom: Region.TOP_LEFT,
    ASSETS.CavernDoomed: Region.TOP_LEFT,
    ASSETS.CavernMetro: Region.TOP_LEFT,
    ASSETS.CavernCorrupted: Region.TOP_LEFT,
    ASSETS.CavernCosmic: Region.TOP_LEFT,
    ASSETS.CavernOriginal: Region.TOP_LEFT,
    ASSETS.PlayVideo: Region.BOTTOM,
    ASSETS.CollectAd: Region.BOTTOM_LEFT,
    ASSETS.Exit: Region.BOTTOM_RIGHT,
    ASSETS.SelectTeam: Region.BOTTOM_LEFT,
    ASSETS.StartBattleGray: Region.BOTTOM_RIGHT,
    ASSETS.RankUp1: Region.LEFT, 
    ASSETS.RankUp2: Region.LEFT, 
    ASSETS.RankUp3: Region.LEFT, 
    ASSETS.RankUp4: Region.LEFT, 
    ASSETS.RankUp5: Region.LEFT, 
    ASSETS.RankUp6: Region.LEFT, 
    ASSETS.RankUp1Synergy: Region.LEFT, 
    ASSETS.RankUp2Synergy: Region.LEFT, 
    ASSETS.RankUp3Synergy: Region.LEFT, 
    ASSETS.RankUp4Synergy: Region.LEFT, 
    ASSETS.RankUp5Synergy: Region.LEFT, 
    ASSETS.RankUp6Synergy: Region.LEFT,
    ASSETS.RankUpSelected1: Region.LEFT, 
    ASSETS.RankUpSelected2: Region.LEFT, 
    ASSETS.RankUpSelected3: Region.LEFT, 
    ASSETS.RankUpSelected4: Region.LEFT,
    ASSETS.RankUpSelected5: Region.LEFT, 
    ASSETS.RankUpSelected6: Region.LEFT, 
    ASSETS.Selected1: Region.TOP,
    ASSETS.Selected2: Region.TOP,
    ASSETS.Selected3: Region.TOP,
    ASSETS.Cavern: Region.RIGHT,
    ASSETS.ChangeTeam: Region.BOTTOM_LEFT,
    ASSETS.BackPVP: Region.TOP_LEFT,
    ASSETS.Back: Region.TOP_LEFT,
    ASSETS.NotFullTeam: Region.BOTTOM,
    ASSETS.FlashRaid: Region.TOP,

    ASSETS.BoxSpeedup: Region.BOTTOM,
    ASSETS.CollectPVP: Region.BOTTOM,
    ASSETS.StartBattlePVP: Region.BOTTOM,
    ASSETS.EnterBattlePVP: Region.BOTTOM_RIGHT,
    ASSETS.BoxDone: Region.BOTTOM,
    ASSETS.EnterMultiplayer: Region.BOTTOM,
    ASSETS.ReduceTime: Region.BOTTOM,
    ASSETS.NextPVP: Region.BOTTOM_RIGHT,

    ASSETS.HavingFun: Region.TOP,
    ASSETS.No: Region.BOTTOM_LEFT,
    ASSETS.DiscardPVP: Region.BOTTOM_RIGHT,
    ASSETS.PVPNoPoints: Region.BOTTOM_RIGHT,

    ASSETS.Rarity: Region.BOTTOM_LEFT,
    ASSETS.RarityRSelected: Region.BOTTOM,
    ASSETS.RarityUCSelected: Region.BOTTOM,
    ASSETS.ElementFireSelected: Region.BOTTOM,
    ASSETS.Element: Region.BOTTOM_RIGHT,
    ASSETS.ElementFire: Region.BOTTOM_RIGHT,
    ASSETS.MonsterUC: Region.ALL,
    ASSETS.MonsterR: Region.ALL,
    ASSETS.RarityUC: Region.BOTTOM_LEFT,
    ASSETS.RarityR: Region.BOTTOM_LEFT,
    ASSETS.Feed: Region.BOTTOM_LEFT,
    ASSETS.MonsterInfo: Region.TOP,
    ASSETS.Sell: Region.BOTTOM_RIGHT,
    ASSETS.Yes: Region.BOTTOM_RIGHT,
    ASSETS.MonsterEmpty: Region.ALL,
    ASSETS.Unlock: Region.ALL,

    ASSETS.Repeat: Region.BOTTOM_RIGHT,
    ASSETS.TakeEgg: Region.BOTTOM,
    ASSETS.Place: Region.BOTTOM_LEFT
}

IN_GAME_ASSETS = (
    ASSETS.Cancel, ASSETS.AutoBattle, ASSETS.Battles, ASSETS.StartBattleRankUp, ASSETS.StartBattlePVP,
    ASSETS.Wheel, ASSETS.ActivityHub, ASSETS.Exit, ASSETS.StartBattle, ASSETS.ChangeTeam, ASSETS.SelectTeam,
    ASSETS.Back, ASSETS.BackPVP, ASSETS.CancelSmall, ASSETS.Slider, ASSETS.Slider2,
    ASSETS.PlayCutscene, ASSETS.Skip, ASSETS.Change, ASSETS.CollectPVP, ASSETS.DiscardPVP
)

Ancestral_Cavers = (
    ASSETS.CavernEvaris,
    ASSETS.CavernGeneza,
    ASSETS.CavernJestin,
    ASSETS.CavernBaBa,
    ASSETS.CavernKhalorc,
    ASSETS.CavernTyr,
    ASSETS.CavernRobur,
    ASSETS.CavernTheton,
    ASSETS.CavernGriffania,
)

All_Cavers = (
    ASSETS.CavernMisery,
    ASSETS.CavernConspiracy,
    ASSETS.CavernFeral,
    ASSETS.CavernHistoria,
    ASSETS.CavernMultiverse,
    ASSETS.CavernEvaris,
    ASSETS.CavernGeneza,
    ASSETS.CavernJestin,
    ASSETS.CavernBaBa,
    ASSETS.CavernKhalorc,
    ASSETS.CavernTyr,
    ASSETS.CavernRobur,
    ASSETS.CavernTheton,
    ASSETS.CavernGriffania,
    ASSETS.CavernAlpine,
    ASSETS.CavernAbyssal,
    ASSETS.CavernGalactic,
    ASSETS.CavernBlossom,
    ASSETS.CavernDoomed,
    ASSETS.CavernMetro,
    ASSETS.CavernCorrupted,
    ASSETS.CavernCosmic,
    ASSETS.CavernOriginal,
)

AdLocations = [[1240, 45], [1240, 35], [1250, 85], [630, 50], [666, 80], [680, 25]]
AdLocationsHorizontal = [(1165, 75), (1240, 45), (1240, 35), (1250, 85)]
AdLocationsVertical = [(630, 50), (666, 80), (680, 25)]
ADS_DIR = "ads"
AD_REGION = Region.AD_AREA

CAVERN_TO_ASSETS = {
    'misery': ASSETS.CavernMisery,
    'conspiracy': ASSETS.CavernConspiracy,
    'feral': ASSETS.CavernFeral,
    'historia': ASSETS.CavernHistoria,
    'multiverse': ASSETS.CavernMultiverse,
    'evaris': ASSETS.CavernEvaris,
    'geneza': ASSETS.CavernGeneza,
    'jestin': ASSETS.CavernJestin,
    'baba': ASSETS.CavernBaBa,
    'khalorc': ASSETS.CavernKhalorc,
    'tyr': ASSETS.CavernTyr,
    'robur': ASSETS.CavernRobur,
    'theton': ASSETS.CavernTheton,
    'griffania': ASSETS.CavernGriffania,
    'alpine': ASSETS.CavernAlpine,
    'abyssal': ASSETS.CavernAbyssal,
    'galactic': ASSETS.CavernGalactic,
    'blossom': ASSETS.CavernBlossom,
    'doomed': ASSETS.CavernDoomed,
    'metro': ASSETS.CavernMetro,
    'corrupted': ASSETS.CavernCorrupted,
    'cosmic': ASSETS.CavernCosmic,
    'original': ASSETS.CavernOriginal,
}

GUI_COMMANDS = {
    "Resource Dungeons": {
        "wait_for_stamina": {"type": "bool", "default": False}
    },
    "Ads": {},
    "Reduce Time": {
        "number_of_ads": {"type": "int", "min": 1, "max": 4, "default": 4}
    },
    "Cavern": {
        "caverns": {
            "type": "multiple_choice",
            "choices": [
                "--Ancestral Caverns--",
                "evaris",
                "geneza",
                "jestin",
                "baba",
                "khalorc",
                "tyr",
                "robur",
                "theton",
                "griffania",
                "--Era Caverns--",
                "misery",
                "conspiracy",
                "feral",
                "historia",
                "multiverse",
                "alpine",
                "abyssal",
                "galactic",
                "blossom",
                "doomed",
                "metro",
                "corrupted",
                "cosmic",
                "original"
            ],
            "default": []
        },
        "max_rooms": {"type": "int", "min": 1, "max": 5, "default": 3},
        "change_team": {"type": "bool", "default": True}
    },
    "PVP": {
        "num_battles": {"type": "int", "min": 1, "max": 15, "default": 2},
        "handle_boxes": {"type": "bool", "default": True},
        "reduce_box_time": {"type": "bool", "default": True}
    },
    "Era Saga": {},
    "Breed Monsters": {
        "num_breeds": {"type": "int", "min": 1, "max": 100, "default": 10},
        "use_tree": {"type": "bool", "default": False}
    },
    "Feed and Sell Monsters": {
        "num_monsters": {"type": "int", "min": 1, "max": 100, "default": 10}
    },
    "Close Game": {
        "action": {
            "type": "choice",
            "choices": ["Close Game Only", "Close Game & Exit Program", "Close Game & Shutdown Computer"],
            "default": "Close Game Only"
        }
    }
}

# =============================================================================
# Configurable Thresholds and Timeouts
# =============================================================================

# Default template matching threshold (0.0 to 1.0)
# Higher = more strict matching, Lower = more lenient
DEFAULT_TEMPLATE_THRESHOLD = 0.85

# Specific thresholds for assets that need different sensitivity
SLIDER_THRESHOLD = 0.8          # Slider detection needs lower threshold
BOX_SPEEDUP_THRESHOLD = 0.85    # Box speedup button detection
CAVERN_THRESHOLD = 0.75         # Cavern dungeon icons
SPIN_WHEEL_THRESHOLD = 0.85     # Spin wheel detection

# Battle timeout in seconds (how long to wait before assuming battle is stuck)
BATTLE_TIMEOUT_SECONDS = 600    # 10 minutes default

# Slider retry limit before asking user for help
SLIDER_MAX_RETRIES = 35

# =============================================================================
# GUI Command Descriptions
# =============================================================================

GUI_COMMAND_DESCRIPTIONS = {
    "PVP": {
        "title": "PVP Battles",
        "description": "Automatically fight PVP battles.\n\n"
                       "Features:\n"
                       "• Auto battle multiple times\n"
                       "• Handle rewards\n"
                       "• Option to reduce box open time if possible",
        "parameters": {
            "num_battles": "Number of PVP battles to fight",
            "handle_boxes": "Automatically open boxes when available and start unlocking new ones",
            "reduce_box_time": "Automatically watch ads to reduce box opening time (only works if handle_boxes is enabled)"
        }
    },
    "Era Saga": {
        "title": "Era Saga",
        "description": "Automatically do Era Saga.\n\n"
                       "Note: Make sure you are in the Era Saga you want to automate before running this command.",
        "parameters": {}
    },
    "Resource Dungeons": {
        "title": "Resource Dungeons",
        "description": "Automatically do all important dungeons.\n\n"
                       "Goes through Gem, Rune and Coin dungeons and finishes them.",
        "parameters": {
            "wait_for_stamina": "Wait for stamina to refill when empty. The program will pause for 10 minutes to wait for stamina to refill"
        }
    },
    "Ads": {
        "title": "Watch Ads",
        "description": "Automatically watch all available ads for rewards.\n\n"
                       "Note: Open MonsterWood before running this command.",
        "parameters": {}
    },
    "Reduce Time": {
        "title": "Reduce Time",
        "description": "Automatically watch as many selected ads as needed to reduce time.\n\n"
                       "Features:\n"
                       "• Select how many ads to watch to reduce time\n",
        "parameters": {
            "number_of_ads": "Number of ads to watch to reduce time"
        },
    },
    "Cavern": {
        "title": "Cavern Dungeons",
        "description": "Automatically do selected cavern dungeons.\n\n"
                       "Features:\n"
                       "• Select multiple dungeons to complete\n"
                       "• Control how many sub-dungeons to do\n"
                       "• Team management. Name '1', '2', '3' the monsters you want to use and the program will switch to them automatically",
        "parameters": {
            "ancestral": "Select which ancestral cavern dungeons to complete",
            "era": "Select which era cavern dungeons to complete",
            "max_rooms": "Maximum number of rooms to explore",
            "change_team": "Enable team switching to use selected monsters"
        }
    },
    "Breed Monsters": {
        "title": "Breed Monsters",
        "description": "Automatically breed monsters.\n\n"
                       "Features:\n"
                       "• Breed multiple times using the repeat button\n"
                       "• Choose between Mountain or Tree breeding locations\n"
                       "• Automatically handles the breeding sequence",
        "parameters": {
            "num_breeds": "Number of times to breed monsters",
            "use_tree": "Use Tree instead of Mountain for breeding"
        }
    },
    "Feed and Sell Monsters": {
        "title": "Feed and Sell Monsters",
        "description": "Automatically feed and sell monsters.\n\n"
                       "Features:\n"
                       "• Process multiple monsters in sequence\n"
                       "• Feed monsters to level them up\n"
                       "• Sell unwanted monsters for resources",
        "parameters": {
            "num_monsters": "Number of monsters to feed and sell"
        }
    },
    "Close Game": {
        "title": "Close Game",
        "description": "Closes the game gracefully.\n\n"
                       "Features:\n"
                       "• Close Game Only - Just closes the game\n"
                       "• Close Game & Exit Program - Closes game and exits AutoMonster\n"
                       "• Close Game & Shutdown Computer - Closes game, exits, and shuts down PC",
        "parameters": {
            "action": "Select what to do after closing the game"
        }
    }
}
